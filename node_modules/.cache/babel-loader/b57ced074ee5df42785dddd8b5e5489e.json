{"ast":null,"code":"var _jsxFileName = \"/Users/blues/CodersLab/Projects/BoozeCounter/src/Recipe.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Modal from 'react-modal';\nimport { RecipeDetails } from \"./RecipeDetails\";\nimport { Ingridient } from \"./models/Ingridient\";\nimport { Recipe as RecipeModel } from \"./models/Recipe\"; //uuid\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = 'http://localhost:3000';\n\nconst Recipe = () => {\n  _s();\n\n  const [recipes, setRecipes] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [openedRecipe, setOpenedRecipe] = useState(null);\n  const [name, setName] = useState(\"\");\n  const [process, setProcess] = useState(\"\"); // const [ingName, setIngName] = useState(\"\");\n  // const [ingValue, setIngValue] = useState();\n\n  const [ingredients, setIngredients] = useState([new Ingridient(\"\", 0)]);\n  const [ingredientsValue, setIngredientsValue] = useState([]);\n  const [newRecipeModalIsOpen, setNewRecipeModalIsOpen] = React.useState(false);\n  const [recipeModalIsOpen, setRecipeModalIsOpen] = React.useState(false);\n  useEffect(() => {\n    setLoading(true);\n    fetch(`${API_URL}/recipes`).then(response => response.json()).then(data => {\n      setRecipes(data);\n      setLoading(false);\n    });\n  }, []);\n\n  const deleteRecipe = id => {\n    setLoading(true);\n    fetch(`${API_URL}/recipes/${id}`, {\n      method: 'DELETE'\n    }).then(response => response.json()).then(() => {\n      setRecipes(prevState => prevState.filter(recipe => recipe.id !== id));\n      setLoading(false);\n    });\n  };\n\n  const recipe = ingredientsValue.reduce(function (recipe, field, index) {\n    recipe[ingredients[index]] = field;\n    return recipe;\n  }, {});\n\n  const addNewRecipe = () => {\n    const recipe = new RecipeModel(name, ingredients, process);\n    fetch(`${API_URL}/recipes`, {\n      method: 'POST',\n      body: JSON.stringify(recipe),\n      headers: {\n        'Content-type': 'application/json'\n      }\n    }).then(resp => resp.json()).then(newRecipe => {\n      console.log(newRecipe);\n      recipe.setId(newRecipe.id);\n      setRecipes(prevState => [...prevState, recipe]);\n    });\n  }; // console.log(recipe)\n\n\n  console.log(recipes); // console.log(ingValue)\n\n  const handleClickIng = e => {\n    e.preventDefault();\n    const ingridient = new Ingridient(\"\", \"\"); // {\n    //     name: ingName,\n    //     quantity: ingValue\n    // }\n\n    setIngredients(prevState => [...prevState, ingridient]); //setIngredients((preState)=>[...preState, ingName])\n    //setIngredientsValue((preState)=>[...preState, ingValue])\n  };\n\n  function openNewModal() {\n    setNewRecipeModalIsOpen(true);\n  }\n\n  function closeNewModal(e) {\n    e.preventDefault();\n    addNewRecipe(); //setIngredients((preState)=>[...preState,ingName, ])\n    //setIngredientsValue((preState)=>[...preState,ingValue])\n    //setIngredients((prevState) => [])\n    //setIngredientsValue((prevState) => [])\n\n    setNewRecipeModalIsOpen(false);\n  }\n\n  function openModal(recipe) {\n    setOpenedRecipe(recipe);\n    setRecipeModalIsOpen(true);\n  }\n\n  function closeModal(close) {\n    setRecipeModalIsOpen(false);\n  } // console.log(recipes)\n\n\n  const updateIngridientName = (index, newName) => {\n    const updatedIngriedients = [...ingredients];\n    updatedIngriedients[index].name = newName;\n  };\n\n  const updateIngridientValue = (index, newQuantity) => {\n    const updatedIngriedients = [...ingredients];\n    updatedIngriedients[index].quantity = newQuantity;\n  };\n\n  const updateProcess = (index, newProcess) => {\n    const updatedProcess = [...ingredients];\n    updatedProcess[index].process = newProcess;\n  };\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Trwa \\u0142adowanie...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 25\n  }, this);\n  if (recipe.length === 0) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recipe\",\n        onClick: openNewModal,\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Add New\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), recipes.map(recipe => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recipe\",\n        onClick: () => openModal(recipe),\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: recipe.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 25\n        }, this)\n      }, recipe.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 21\n      }, this)), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: recipeModalIsOpen,\n        onRequestClose: closeModal,\n        ariaHideApp: false,\n        children: /*#__PURE__*/_jsxDEV(RecipeDetails, {\n          recipes: recipes,\n          recipe: openedRecipe,\n          open: recipeModalIsOpen,\n          close: closeModal,\n          deleteRecipe: deleteRecipe\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: newRecipeModalIsOpen,\n        onRequestClose: closeNewModal,\n        ariaHideApp: false,\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"container\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"form\",\n            onSubmit: closeNewModal,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"new-recipe-title\",\n              placeholder: 'Drink Name',\n              onChange: e => setName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 29\n            }, this), ingredients.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: 'new-ing-div',\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"new-recipe-title\",\n                placeholder: `ingredient ${index + 1}`,\n                onChange: e => updateIngridientName(index, e.target.value),\n                value: ingredients[index].name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: 'number',\n                className: \"new-recipe-title\",\n                placeholder: \"quantity\",\n                onChange: e => updateIngridientValue(index, e.target.value),\n                value: ingredients[index].quantity\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 37\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 33\n            }, this)), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"new-recipe-title\",\n              onChange: e => setProcess(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button\",\n              onClick: handleClickIng,\n              children: \"Add ingreedient\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button\",\n              type: \"submit\",\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(Recipe, \"Gy07OnUSLblo27rz/r3q/1fdbTY=\");\n\n_c = Recipe;\nexport { Recipe }; // check on click for recipe to prevent refreshiing\n\nvar _c;\n\n$RefreshReg$(_c, \"Recipe\");","map":{"version":3,"sources":["/Users/blues/CodersLab/Projects/BoozeCounter/src/Recipe.js"],"names":["React","useEffect","useState","Modal","RecipeDetails","Ingridient","Recipe","RecipeModel","API_URL","recipes","setRecipes","loading","setLoading","openedRecipe","setOpenedRecipe","name","setName","process","setProcess","ingredients","setIngredients","ingredientsValue","setIngredientsValue","newRecipeModalIsOpen","setNewRecipeModalIsOpen","recipeModalIsOpen","setRecipeModalIsOpen","fetch","then","response","json","data","deleteRecipe","id","method","prevState","filter","recipe","reduce","field","index","addNewRecipe","body","JSON","stringify","headers","resp","newRecipe","console","log","setId","handleClickIng","e","preventDefault","ingridient","openNewModal","closeNewModal","openModal","closeModal","close","updateIngridientName","newName","updatedIngriedients","updateIngridientValue","newQuantity","quantity","updateProcess","newProcess","updatedProcess","length","map","target","value","item"],"mappings":"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","sourcesContent":["import React, {useEffect, useState,} from 'react';\nimport Modal from 'react-modal';\nimport {RecipeDetails} from \"./RecipeDetails\";\nimport {Ingridient} from \"./models/Ingridient\";\nimport {Recipe as RecipeModel} from \"./models/Recipe\"\n//uuid\n\nconst API_URL = 'http://localhost:3000';\n\nconst Recipe = () => {\n    const [recipes, setRecipes] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [openedRecipe, setOpenedRecipe] = useState(null);\n    const [name, setName] = useState(\"\");\n    const [process, setProcess] = useState(\"\");\n    // const [ingName, setIngName] = useState(\"\");\n    // const [ingValue, setIngValue] = useState();\n    const [ingredients, setIngredients] = useState([new Ingridient(\"\",0)]);\n    const [ingredientsValue, setIngredientsValue] = useState([]);\n    const [newRecipeModalIsOpen, setNewRecipeModalIsOpen] = React.useState(false);\n    const [recipeModalIsOpen, setRecipeModalIsOpen] = React.useState(false);\n\n    useEffect(() => {\n        setLoading(true);\n        fetch(`${API_URL}/recipes`)\n            .then((response) => response.json())\n            .then((data) => {\n                setRecipes(data);\n                setLoading(false);\n            });\n    }, []);\n    const deleteRecipe = (id) => {\n        setLoading(true);\n        fetch(`${API_URL}/recipes/${id}`, { method: 'DELETE' })\n            .then((response) => response.json())\n            .then(() => {\n                setRecipes((prevState) => prevState.filter((recipe) => recipe.id !== id));\n                setLoading(false);\n            });\n    };\n    const recipe =  ingredientsValue.reduce(function(recipe, field, index) {\n        recipe[ingredients[index]] = field;\n        return recipe;\n    }, {})\n    const addNewRecipe = () => {\n        const recipe = new RecipeModel( name, ingredients, process);\n        fetch(`${API_URL}/recipes`, {\n            method: 'POST',\n            body: JSON.stringify(recipe),\n            headers: {\n                'Content-type': 'application/json',\n            },\n        })\n            .then((resp) => resp.json())\n            .then((newRecipe) => {\n                console.log(newRecipe);\n                recipe.setId(newRecipe.id)\n                setRecipes((prevState) => [...prevState, recipe]);\n            });\n    };\n    // console.log(recipe)\n    console.log(recipes)\n    // console.log(ingValue)\n    const handleClickIng = (e) => {\n        e.preventDefault()\n        const ingridient = new Ingridient(\"\", \"\");\n        // {\n        //     name: ingName,\n        //     quantity: ingValue\n        // }\n\n        setIngredients( prevState => [...prevState, ingridient]);\n        //setIngredients((preState)=>[...preState, ingName])\n        //setIngredientsValue((preState)=>[...preState, ingValue])\n\n    }\n    function openNewModal() {\n        setNewRecipeModalIsOpen(true);\n    }\n\n    function closeNewModal(e) {\n        e.preventDefault()\n        addNewRecipe();\n\n        //setIngredients((preState)=>[...preState,ingName, ])\n        //setIngredientsValue((preState)=>[...preState,ingValue])\n        //setIngredients((prevState) => [])\n        //setIngredientsValue((prevState) => [])\n        setNewRecipeModalIsOpen(false);\n    }\n    function openModal(recipe) {\n        setOpenedRecipe(recipe);\n        setRecipeModalIsOpen(true);\n    }\n    function closeModal(close) {\n        setRecipeModalIsOpen(false);\n    }\n    // console.log(recipes)\n\n    const updateIngridientName = (index, newName) => {\n        const updatedIngriedients = [...ingredients];\n        updatedIngriedients[index].name=newName;\n    }\n    const updateIngridientValue = (index, newQuantity) =>{\n        const updatedIngriedients = [...ingredients];\n        updatedIngriedients[index].quantity= newQuantity;\n    }\n    const updateProcess = (index, newProcess) =>{\n        const updatedProcess = [...ingredients];\n        updatedProcess[index].process=newProcess;\n    }\n\n    if (loading) return <p>Trwa ładowanie...</p>;\n    if (recipe.length === 0) return null;\n    return (\n        <>\n            <section className={\"container\"}>\n                <div className={\"recipe\"} onClick={openNewModal}>\n                    <h1>Add New</h1>\n                </div>\n                {recipes.map((recipe) => (\n                    <div key={recipe.id} className={\"recipe\"} onClick={ () => openModal(recipe)}>\n                        <h2>{recipe.name}</h2>\n                    </div>\n                ))}\n                <Modal\n                    isOpen={recipeModalIsOpen}\n                    onRequestClose={closeModal}\n                    ariaHideApp={false}\n                >\n                    <RecipeDetails recipes={recipes} recipe={openedRecipe} open={recipeModalIsOpen} close={closeModal} deleteRecipe={deleteRecipe}/>\n                </Modal>\n                <Modal\n                    isOpen={newRecipeModalIsOpen}\n                    onRequestClose={closeNewModal}\n                    ariaHideApp={false}\n                >\n                    <section className={\"container\"}>\n                        <form className={\"form\"} onSubmit={closeNewModal}>\n                            <input className={\"new-recipe-title\"} placeholder={'Drink Name'} onChange={e => setName(e.target.value)}/>\n                            {ingredients.map((item,index)=>(\n                                <div key={index} className={'new-ing-div'}>\n                                    <input  className={\"new-recipe-title\"}\n                                            placeholder={`ingredient ${index+1}`}\n                                            onChange={e => updateIngridientName(index,e.target.value)}\n                                            value={ingredients[index].name}\n                                    />\n                                    <input type={'number'} className={\"new-recipe-title\"}\n                                           placeholder={\"quantity\"}\n                                           onChange={e => updateIngridientValue(index,e.target.value)}\n                                           value={ingredients[index].quantity}\n                                    />\n                                </div>\n                            ))}\n                            <textarea className={\"new-recipe-title\"} onChange={e => setProcess(e.target.value)}/>\n                            <button className={\"button\"} onClick={handleClickIng}>Add ingreedient</button>\n                            <button className={\"button\"} type={\"submit\"}>Save</button>\n\n                        </form>\n                    </section>\n                </Modal>\n            </section>\n        </>\n    );\n}\n\nexport { Recipe };\n\n// check on click for recipe to prevent refreshiing"]},"metadata":{},"sourceType":"module"}